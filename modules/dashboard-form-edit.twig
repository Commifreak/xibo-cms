{#
/**
 * Copyright (C) 2022 Xibo Signage Ltd
 *
 * Xibo - Digital Signage - http://www.xibo.org.uk
 *
 * This file is part of Xibo.
 *
 * Xibo is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * any later version.
 *
 * Xibo is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with Xibo.  If not, see <http://www.gnu.org/licenses/>.
 */
#}
{% extends "form-base.twig" %}
{% import "forms.twig" as forms %}

{% block formTitle %}
    {% trans "Edit" %}
{% endblock %}

{% block formHtml %}
    <div class="row">
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item"><a class="nav-link active" href="#generalTab" role="tab" data-toggle="tab"><span>{% trans "General" %}</span></a></li>
        </ul>
        <div class="col-md-12">
            <form id="moduleEditForm" class="XiboForm form-horizontal" method="put" action="{{ url_for("module.widget.edit", {id: module.widget.widgetId}) }}">
                <div class="tab-content">
                    <div class="tab-pane active" id="generalTab">
                        {% set title %}{% trans "Name" %}{% endset %}
                        {% set helpText %}{% trans "An optional name for this widget" %}{% endset %}
                        {{ forms.input("name", title, module.getOption("name"), helpText) }}

                        {% set title %}{% trans "Set a duration?" %}{% endset %}
                        {% set helpText %}{% trans "Select to provide a specific duration for this Widget" %}{% endset %}
                        {{ forms.checkbox("useDuration", title, module.getUseDuration(), helpText) }}

                        {% set title %}{% trans "Duration" %}{% endset %}
                        {% set helpText %}{% trans "The duration in seconds this should be displayed" %}{% endset %}
                        {{ forms.number("duration", title, module.getDuration(), helpText, "duration-fields", "required") }}

                        {% set title %}{% trans "Enable Stats Collection?" %}{% endset %}
                        {% set helpText %}{% trans "Enable the collection of Proof of Play statistics for this Widget. Ensure that ‘Enable Stats Collection’ is set to ‘On’ in the Display Settings." %}{% endset %}

                        {% set offOption %}{% trans "Off" %}{% endset %}
                        {% set onOption %}{% trans "On" %}{% endset %}
                        {% set inheritOption %}{% trans "Inherit" %}{% endset %}
                        {% set options = [
                            { id: "Off", value: offOption },
                            { id: "On", value: onOption },
                            { id: "Inherit", value: inheritOption }
                        ] %}
                        {{ forms.dropdown("enableStat", "single", title, module.getOption("enableStat", theme.getSetting("WIDGET_STATS_ENABLED_DEFAULT") ), options, "id", "value", helpText) }}

                        {% set title %}{% trans "Link" %}{% endset %}
                        {% set helpText %}{% trans "The Location (URL) of the webpage" %}{% endset %}
                        {{ forms.input("url", title, module.getOption("url")|url_decode, helpText, "required") }}

                        {% set title %}{% trans "Update Interval (mins)" %}{% endset %}
                        {% set helpText %}{% trans "Please enter the update interval in minutes. This should be kept as high as possible. For example, if the data will only change once per hour this could be set to 60." %}{% endset %}
                        {{ forms.number("updateInterval", title, module.getOption("updateInterval", 60), helpText, "", "required") }}

                        {% set options = [
                            { value: id, value: null },
                            { value: "Amharic", id: "am" },
                            { value: "Arabic", id: "ar" },
                            { value: "Basque", id: "eu" },
                            { value: "Bengali", id: "bn" },
                            { value: "Bulgarian", id: "bg" },
                            { value: "Catalan", id: "ca" },
                            { value: "Cherokee", id: "chr" },
                            { value: "Chinese", id: "zh-CN" },
                            { value: "Chinese (Taiwan)", id: "zh-TW" },
                            { value: "Croatian", id: "hr" },
                            { value: "Czech", id: "cs" },
                            { value: "Danish", id: "da" },
                            { value: "Dutch", id: "nl" },
                            { value: "English (UK)", id: "en-GB" },
                            { value: "English (US)", id: "en" },
                            { value: "Estonian", id: "et" },
                            { value: "Filipino", id: "fil" },
                            { value: "Finnish", id: "fi" },
                            { value: "French", id: "fr" },
                            { value: "German", id: "de" },
                            { value: "Greek", id: "el" },
                            { value: "Gujarati", id: "gu" },
                            { value: "Hebrew", id: "iw" },
                            { value: "Hindi", id: "hi" },
                            { value: "Hungarian", id: "hu" },
                            { value: "Icelandic", id: "is" },
                            { value: "Indonesian", id: "id" },
                            { value: "Italian", id: "it" },
                            { value: "Japanese", id: "ja" },
                            { value: "Kannada", id: "kn" },
                            { value: "Korean", id: "ko" },
                            { value: "Latvian", id: "lv" },
                            { value: "Lithuanian", id: "lt" },
                            { value: "Malay", id: "ms" },
                            { value: "Malayalam", id: "ml" },
                            { value: "Marathi", id: "mr" },
                            { value: "Norwegian", id: "no" },
                            { value: "Polish", id: "pl" },
                            { value: "Portuguese (Brazil)", id: "pt-BR" },
                            { value: "Portuguese (Portugal)", id: "pt-PT" },
                            { value: "Romanian", id: "ro" },
                            { value: "Russian", id: "ru" },
                            { value: "Serbian", id: "sr" },
                            { value: "Slovak", id: "sk" },
                            { value: "Slovenian", id: "sl" },
                            { value: "Spanish", id: "es" },
                            { value: "Swahili", id: "sw" },
                            { value: "Swedish", id: "sv" },
                            { value: "Tamil", id: "ta" },
                            { value: "Telugu", id: "te" },
                            { value: "Thai", id: "th" },
                            { value: "Turkish", id: "tr" },
                            { value: "Urdu", id: "ur" },
                            { value: "Ukrainian", id: "uk" },
                            { value: "Vietnamese", id: "vi" },
                            { value: "Welsh", id: "cy" }
                        ] %}
                        {% set title %}{% trans "Language" %}{% endset %}
                        {% set helpText %}{% trans "Optionally enter a language to be set on the browser capturing the dashboard. Please note: this only affect some dashboards." %}{% endset %}
                        {{ forms.dropdown("lang", "single", title, module.getOption("lang"), options, "id", "value", helpText, "selectPicker") }}

                        {% set title %}{% trans "Timezone" %}{% endset %}
                        {% set helpText %}{% trans "Optionally enter a timezone to be set on the browser capturing the dashboard. Please note: this only affect some dashboards." %}{% endset %}
                        {{ forms.dropdown("tz", "single", title, module.getOption("tz"), module.getTimezoneList(), "id", "value", helpText, "selectPicker") }}
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock %}